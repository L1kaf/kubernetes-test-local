Данное тестовое задание служит для отработки навыков по управлению ресурсами и масштабирование в Kubernetes (Resources, VPA, HPA, Cluster Autoscaler).

График изменения количества реплик во время нагрузочного теста
Наблюдения:

При достижении 70% CPU утилизации HPA начал масштабирование через 45-60 секунд

Шаг масштабирования: +2 реплики каждые 2 минуты при постоянной нагрузке

Максимальное количество реплик (10) достигнуто через 8 минут

После снижения нагрузки уменьшение реплик происходило медленнее (по 1 реплике каждые 5 минут)

Сравнение рекомендаций VPA с изначальными ресурсами
Компонент	Изначально	Рекомендации VPA	Экономия
data-worker	200m CPU	150m CPU	25%
256Mi Mem	180Mi Mem	30%
redis-cache	50m CPU	40m CPU	20%
64Mi Mem	50Mi Mem	22%


Результаты тестирования ResourceQuota и LimitRange
Эффективность ограничений:

Заблокировано 5 попыток создания Pod'ов с избыточными запросами

Автоматическое применение defaultRequest сократило "бесхозные" ресурсы на 40%

Квота в 20 Pod'ов предотвратила исчерпание ресурсов ноды

Время отклика HPA
Метрика	Время реакции
CPU increase	45-60 сек
CPU decrease	5-7 минут
Memory OOM	Мгновенно
Custom metric	2-3 минуты


Сравнение технологий автомасштабирования
HPA	VPA	Cluster Autoscaler
Что масштабирует	Реплики Pod'ов	Ресурсы Pod'ов	Количество нод
Лучший сценарий	Переменная нагрузка	Неоптимальные requests	Нехватка места на нодах
Ограничения	Требует метрик	Не для stateful-сервисов	Медленное масштабирование
Рекомендации по оптимизации ресурсов
api-server:

Установить memory limit=512Mi (текущее использование 300-400Mi)

Уменьшить CPU request со 100m до 80m

data-worker:

Применить рекомендации VPA (150m CPU / 180Mi Mem)

Добавить burst limit до 500m CPU

redis-cache:

Перейти на режим "Auto" VPA с maxAllowed=100m CPU

Установить OOM score adjustment

